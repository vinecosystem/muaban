<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Muaban.vin – Thương mại điện tử Web3</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Logo & favicon -->
  <link rel="icon" href="logo.png" type="image/png">

  <!-- CSS -->
  <link rel="stylesheet" href="style.css">

  <!-- Ethers.js -->
  <script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>
</head>
<body>
  <!-- HEADER -->
  <header>
    <div class="header-left">
      <img src="logo.png" alt="Muaban.vin" class="logo">
      <span class="slogan">Mua bán minh bạch – On-chain an toàn</span>
    </div>
    <div class="header-right">
      <button id="btnConnect" class="btn primary">Kết nối ví</button>
      <div id="walletInfo" class="hidden">
        <span id="accountShort" class="mono">0x…</span>
        <span class="balance">VIN: <b id="vinBalance">0.0000</b> | VIC: <b id="vicBalance">0.0000</b></span>
        <button id="btnDisconnect" class="btn">Ngắt</button>
      </div>
    </div>
  </header>

  <!-- MENU (ẩn/hiện theo trạng thái ví) -->
  <nav id="menu" class="hidden">
    <button id="btnCreate" class="btn">Đăng sản phẩm</button>
    <button id="btnOrdersBuy" class="btn">Đơn hàng mua</button>
    <button id="btnOrdersSell" class="btn">Đơn hàng bán</button>
  </nav>

  <!-- TỶ GIÁ -->
  <section id="exchangeRate">
    <p><span id="vinRate">1 VIN = … VND</span></p>
  </section>

  <!-- TÌM KIẾM -->
  <section id="searchBox">
    <input type="text" id="searchInput" placeholder="Tìm sản phẩm theo tên…">
    <button id="btnSearch" class="btn">Tìm</button>
  </section>

  <!-- DANH SÁCH SẢN PHẨM -->
  <section id="productList">
    <!-- Sản phẩm sẽ hiển thị bằng JS -->
  </section>
  <!-- FORM ĐĂNG SẢN PHẨM -->
  <section id="createForm" class="hidden">
    <h2>Đăng sản phẩm</h2>
    <label>Tên sản phẩm</label>
    <input type="text" id="createName" maxlength="500">

    <label>Link IPFS ảnh/video</label>
    <input type="text" id="createIPFS">

    <label>Đơn vị tính (cái/chiếc/…)</label>
    <input type="text" id="createUnit">

    <label>Giá bán (VNĐ)</label>
    <input type="number" id="createPrice" min="1">

    <label>Ví nhận thanh toán</label>
    <input type="text" id="createWallet">

    <label>Thời gian giao hàng (ngày)</label>
    <input type="number" id="createDays" min="1">

    <button id="btnSubmitCreate" class="btn primary">Đăng</button>
    <button id="btnCancelCreate" class="btn">Hủy</button>
  </section>

  <!-- FORM MUA SẢN PHẨM -->
  <section id="buyForm" class="hidden">
    <h2>Mua sản phẩm</h2>
    <input type="hidden" id="buyProductId">

    <label>Họ tên</label>
    <input type="text" id="buyName">

    <label>Địa chỉ</label>
    <input type="text" id="buyAddress">

    <label>Số điện thoại</label>
    <input type="text" id="buyPhone">

    <label>Phụ ghi</label>
    <input type="text" id="buyNote">

    <label>Số lượng</label>
    <input type="number" id="buyQuantity" min="1" value="1">

    <p><b>Tổng thanh toán: <span id="buyTotalVIN">0</span> VIN</b></p>

    <button id="btnSubmitBuy" class="btn primary">Mua</button>
    <button id="btnCancelBuy" class="btn">Hủy</button>
  </section>
  <!-- ĐĂNG KÝ VÍ (0.001 VIN) -->
  <section id="registerBox" class="hidden">
    <div class="card info">
      <p>Ví của bạn chưa đăng ký. Phí đăng ký: <b>0.001 VIN</b>.</p>
      <button id="btnRegister" class="btn primary">Đăng ký ngay</button>
    </div>
  </section>

  <!-- ĐƠN HÀNG MUA -->
  <section id="ordersBuy" class="hidden">
    <h2>Đơn hàng mua</h2>
    <div id="ordersBuyList" class="list">
      <!-- JS render các đơn đã mua; mỗi đơn có nút Xác nhận đã nhận / Hoàn tiền -->
    </div>
  </section>

  <!-- ĐƠN HÀNG BÁN -->
  <section id="ordersSell" class="hidden">
    <h2>Đơn hàng bán</h2>
    <div id="ordersSellList" class="list">
      <!-- JS render các đơn mới của sản phẩm mình bán; hiển thị hạn giao hàng -->
    </div>
  </section>

  <!-- FOOTER -->
  <footer>
    <div class="links">
      <a id="linkContract" target="_blank" rel="noopener"
         href="https://vicscan.xyz/address/0x190FD18820498872354eED9C4C080cB365Cd12E0">
        Hợp đồng
      </a>
      <a id="linkVin" target="_blank" rel="noopener"
         href="https://vicscan.xyz/token/0x941F63807401efCE8afe3C9d88d368bAA287Fac4">
        VIN Token
      </a>
      <a id="linkSwap" target="_blank" rel="noopener" href="https://frollswap.com/">Swap VIN/VIC</a>
      <a id="linkGuide" target="_blank" rel="noopener" href="huongdan.html">Hướng dẫn</a>
    </div>
    <div class="note">
      <small>Muaban.vin — hợp đồng là trọng tài, thanh toán VIN, giá theo VND:contentReference[oaicite:3]{index=3}.</small>
    </div>
  </footer>

  <!-- Toast + vùng tạm -->
  <div id="toast" class="toast hidden"></div>
  <template id="productItemTpl">
    <!-- JS sẽ clone và điền dữ liệu -->
    <article class="product">
      <img class="thumb" alt="">
      <div class="meta">
        <h3 class="title"></h3>
        <div class="price"></div>
        <div class="status"></div>
        <div class="actions"></div>
      </div>
    </article>
  </template>

  <!-- SCRIPTS -->
  <script>
    /* Các hằng số dùng bởi app.js */
    window.MUABAN_ADDR = "0x190FD18820498872354eED9C4C080cB365Cd12E0";  /* từ mô tả:contentReference[oaicite:4]{index=4} */
    window.VIN_ADDR    = "0x941F63807401efCE8afe3C9d88d368bAA287Fac4";  /* VIN trên VIC:contentReference[oaicite:5]{index=5} */
  </script>
  <script src="app.js"></script>
</body>
</html>
